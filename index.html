<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Th·ªùi gian bi·ªÉu cho b√©</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
    <link href="css/main.css" rel="stylesheet"/>
    
    <!-- Th√™m CSS cho profile, c√¢y v√† c√°c ph·∫ßn thi·∫øu -->
    <style>
        /* CSS cho ph·∫ßn c√¢y v√† n√∫t t∆∞·ªõi */
        .tree-container {
            position: relative;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .tree-image {
            width: 200px;
            height: 200px;
            transition: transform 0.3s ease;
        }

        .tree-name {
            font-size: 20px;
            font-weight: bold;
            color: #4CAF50;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .water-button {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #2196F3, #03A9F4);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        .water-button:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(33, 150, 243, 0); }
            100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0); }
        }

        .tree-growth {
            animation: grow 1s ease-out;
        }

        @keyframes grow {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* CSS cho profile sticky */
        .profile-container {
            position: sticky;
            top: 10px;
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            z-index: 1000;
        }

        .profile-container img {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            object-fit: cover;
            border: 3px solid #FF7043;
        }

        .profile-info {
            margin-left: 15px;
        }

        .profile-name {
            font-weight: bold;
            color: #FF7043;
        }

        .profile-level {
            font-size: 14px;
            color: #795548;
        }
        
        /* C·∫≠p nh·∫≠t CSS cho hi·ªÉn th·ªã c·∫•p ƒë·ªô */
        .xp-bar {
            height: 6px;
            background-color: #ddd;
            border-radius: 3px;
            margin: 5px 0;
            overflow: hidden;
        }

        .xp-progress {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.3s;
        }

        .level-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(45deg, #FF6D00, #FFA726);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* CSS cho th·ª≠ th√°ch tu·∫ßn */
        .weekly-challenge {
            background: linear-gradient(45deg, #7E57C2, #5C6BC0);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            animation: pulse 2s infinite;
        }

        .challenge-progress {
            margin-top: 10px;
            font-size: 14px;
        }

        .challenge-reward {
            display: inline-block;
            font-size: 24px;
            margin-top: 5px;
        }
        
        /* CSS cho popup ch√∫c m·ª´ng */
        #popup-congrats {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            text-align: center;
            display: none;
        }

        #popup-congrats img {
            width: 250px;
            border-radius: 10px;
            box-shadow: 0 0 10px #888;
        }

        #popup-text {
            background: white;
            padding: 10px;
            font-weight: bold;
            font-size: 18px;
            margin-top: -5px;
        }
        
        /* CSS cho hi·ªáu ·ª©ng t∆∞·ªõi n∆∞·ªõc */
        #watering-gif {
            display: none;
            position: absolute;
            width: 120px;
            z-index: 10;
        }
        
        /* CSS cho hi·ªÉn th·ªã c·∫•p ƒë·ªô */
        .level-display {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background-color: #f0f8ff;
            border-radius: 8px;
        }

        .level-star {
            color: gold;
            text-shadow: 0 0 2px #000;
        }
        
        @media screen and (max-width: 768px) {
            .profile-container {
                flex-direction: row;
                margin: 0;
                padding: 8px;
                width: 100%;
                border-radius: 0;
                background: rgba(255, 255, 255, 0.98);
            }

            .profile-container img {
                width: 80px;
                height: 80px;
            }

            .profile-info {
                margin-left: 12px;
                text-align: left;
            }
            
            .tree-container {
                padding: 10px;
                margin-top: 10px;
            }

            .tree-image {
                width: 300px;
                height: 300px;
            }

            .water-button {
                width: 80px;
                height: 80px;
                font-size: 24px;
                right: -15px;
            }
        }
    </style>
</head>
<body>
    <!-- Th√™m profile c·ªßa 2 em -->
    <div class="profile-container" id="tridung-profile">
        <img src="images/vit.jpg" alt="Tr√≠ D≈©ng">
        <div class="profile-info">
            <div class="profile-name">Tr√≠ D≈©ng</div>
            <div class="profile-level">C·∫•p <span id="tridung-level">1</span></div>
            <div class="xp-bar">
                <div class="xp-progress" id="tridung-xp-progress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <div class="profile-container" id="thaoVy-profile" style="display: none;">
        <img src="images/vy.jpg" alt="Th·∫£o Vy">
        <div class="profile-info">
            <div class="profile-name">Th·∫£o Vy</div>
            <div class="profile-level">C·∫•p <span id="thaoVy-level">1</span></div>
            <div class="xp-bar">
                <div class="xp-progress" id="thaoVy-xp-progress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>Th·ªùi gian bi·ªÉu cho b√©</h1>
            <div class="current-time"></div>
        </div>

        <div class="tabs">
            <div class="tab active" data-child="tridung">
                <img src="images/vit.jpg" alt="Tr√≠ D≈©ng">
                Tr√≠ D≈©ng (5 tu·ªïi)
            </div>
            <div class="tab" data-child="thaoVy">
                <img src="images/vy.jpg" alt="Th·∫£o Vy">
                Th·∫£o Vy (3 tu·ªïi)
            </div>
        </div>

        <div id="tridung" class="child-content">
            <div class="task-list"></div>
        </div>

        <div id="thaoVy" class="child-content" style="display: none;">
            <div class="task-list"></div>
        </div>
    </div>

    <script>
        // H√†m ph√°t √¢m thanh
        function playAudio(filename) {
            const audio = new Audio(`audio/${filename}`);
            audio.play().catch(e => console.warn("Kh√¥ng th·ªÉ ph√°t √¢m thanh:", e));
        }

        // H·ªá th·ªëng t√≠nh ƒëi·ªÉm
        const POINTS = {
            good: 3,
            neutral: 1,
            bad: 0
        };

        // H·ªá th·ªëng huy hi·ªáu
        const badges = {
            sleep7: {
                id: 'sleep7',
                name: 'Ng·ªß Ngoan 7 Ng√†y',
                icon: 'üò¥',
                condition: 'ƒêi ng·ªß ƒë√∫ng gi·ªù 7 ng√†y li√™n ti·∫øp'
            },
            star3: {
                id: 'star3',
                name: '3 Ng√†y Sao V√†ng',
                icon: '‚≠ê',
                condition: 'Ho√†n th√†nh t·ªët 3 ng√†y li√™n ti·∫øp'
            },
            tree: {
                id: 'tree',
                name: 'Ng∆∞·ªùi Tr·ªìng C√¢y',
                icon: 'üå≥',
                condition: 'C√¢y ph√°t tri·ªÉn ƒë·∫ßy ƒë·ªß'
            },
            eat5: {
                id: 'eat5',
                name: 'ƒÇn Gi·ªèi 5 Ng√†y',
                icon: 'üçΩÔ∏è',
                condition: 'ƒÇn t·ªëi ngoan 5 ng√†y li√™n ti·∫øp'
            }
        };

        // Nhi·ªám v·ª• c·ªßa m·ªói em
        const tasks = {
            tridung: [
                { id: 'td1', time: '06:00', name: 'Th·ª©c d·∫≠y, v·ªá sinh c√° nh√¢n & ƒëi h·ªçc', audio: 'thuc_day_ve_sinh_ca_nhan_di_hoc.mp3' },
                { id: 'td2', time: '17:00', name: 'ƒê·ªçc s√°ch, t√¥ m√†u ho·∫∑c l√†m to√°n', audio: 'doc_sach_to_mau_hoac_lam_toan.mp3' },
                { id: 'td3', time: '18:00', name: 'Ch∆°i t·ª± do', audio: 'choi_tu_do.mp3' },
                { id: 'td4', time: '19:00', name: 'ƒÇn t·ªëi t·∫°i nh√†', audio: 'an_toi_tai_nha.mp3' },
                { id: 'td5', time: '20:00', name: 'V·ªá sinh c√° nh√¢n bu·ªïi t·ªëi', audio: 've_sinh_ca_nhan_buoi_toi.mp3' },
                { id: 'td6', time: '21:00', name: 'ƒêi ng·ªß', audio: 'di_ngu.mp3' }
            ],
            thaoVy: [
                { id: 'tv1', time: '06:00', name: 'Th·ª©c d·∫≠y, v·ªá sinh c√° nh√¢n & ƒëi h·ªçc', audio: 'thuc_day_ve_sinh_ca_nhan_di_hoc_thaovy.mp3' },
                { id: 'tv2', time: '17:00', name: 'ƒê·ªçc s√°ch, t√¥ m√†u ho·∫∑c l√†m to√°n', audio: 'doc_sach_to_mau_hoac_lam_toan_thaovy.mp3' },
                { id: 'tv3', time: '18:00', name: 'Ch∆°i t·ª± do', audio: 'choi_tu_do_thaovy.mp3' },
                { id: 'tv4', time: '19:00', name: 'ƒÇn t·ªëi t·∫°i nh√†', audio: 'an_toi_tai_nha_thaovy.mp3' },
                { id: 'tv5', time: '20:00', name: 'V·ªá sinh c√° nh√¢n bu·ªïi t·ªëi', audio: 've_sinh_ca_nhan_buoi_toi_thaovy.mp3' },
                { id: 'tv6', time: '21:00', name: 'ƒêi ng·ªß', audio: 'di_ngu_thaovy.mp3' }
            ]
        };

        // Bi·∫øn cho h·ªá th·ªëng c√¢y ph√°t tri·ªÉn
        let treeLevel = 1;
        let waterCredits = 0;
        let currentChild = 'tridung';
        let currentWeekDay = 0; // 0: Ch·ªß Nh·∫≠t, 1: Th·ª© 2...

        // H√†m ƒë·ªÉ c·∫≠p nh·∫≠t h√¨nh ·∫£nh c√¢y
        function updateTreeImage() {
            // X√°c ƒë·ªãnh c·∫•p ƒë·ªô c√¢y d·ª±a v√†o ng√†y trong tu·∫ßn
            const weekDay = new Date().getDay(); // 0: Ch·ªß Nh·∫≠t, 1: Th·ª© 2...
            
            // N·∫øu l√† ch·ªß nh·∫≠t, hi·ªÉn th·ªã c√¢y tr∆∞·ªüng th√†nh
            if (weekDay === 0) {
                document.getElementById("tree-img").src = "images/tree_full.png";
                document.getElementById("tree-status").textContent = "C√¢y ƒë√£ tr∆∞·ªüng th√†nh ho√†n to√†n! Ch√∫c m·ª´ng b√©!";
                document.getElementById("tree-status").style.color = "#4CAF50";
            } else {
                // C√°c ng√†y kh√°c trong tu·∫ßn, hi·ªÉn th·ªã theo ti·∫øn ƒë·ªô
                // Th·ª© 2 (1) -> c·∫•p ƒë·ªô 1, Th·ª© 3 (2) -> c·∫•p ƒë·ªô 2, ..., Th·ª© 7 (6) -> c·∫•p ƒë·ªô 6
                const expectedLevel = weekDay; // C·∫•p ƒë·ªô mong ƒë·ª£i cho ng√†y hi·ªán t·∫°i
                
                // Hi·ªÉn th·ªã c√¢y theo c·∫•p ƒë·ªô th·ª±c t·∫ø (kh√¥ng v∆∞·ª£t qu√° c·∫•p ƒë·ªô mong ƒë·ª£i)
                const displayLevel = Math.min(treeLevel, expectedLevel);
                document.getElementById("tree-img").src = `images/tree_day${displayLevel}.png`;
                
                // Hi·ªÉn th·ªã th√¥ng b√°o v·ªÅ tr·∫°ng th√°i c√¢y
                if (treeLevel < expectedLevel) {
                    document.getElementById("tree-status").textContent = "C√¢y c·∫ßn ƒë∆∞·ª£c t∆∞·ªõi n∆∞·ªõc th√™m!";
                    document.getElementById("tree-status").style.color = "#FF9800";
                } else {
                    document.getElementById("tree-status").textContent = "C√¢y ƒëang ph√°t tri·ªÉn t·ªët!";
                    document.getElementById("tree-status").style.color = "#4CAF50";
                }
            }
        }

        // H√†m t∆∞·ªõi n∆∞·ªõc cho c√¢y
        function waterTree() {
            console.log("ƒêang t∆∞·ªõi c√¢y, s·ªë l∆∞·ª£t hi·ªán t·∫°i:", waterCredits);
            
            // Ki·ªÉm tra n·∫øu kh√¥ng c√≤n l∆∞·ª£t t∆∞·ªõi
            if (waterCredits <= 0) {
                alert("B√© c·∫ßn ho√†n th√†nh nhi·ªám v·ª• ƒë·ªÉ nh·∫≠n l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc!");
                return;
            }
            
            // Gi·∫£m s·ªë l∆∞·ª£t t∆∞·ªõi
            waterCredits--;
            
            // Hi·ªÉn th·ªã hi·ªáu ·ª©ng t∆∞·ªõi n∆∞·ªõc
            const wateringGif = document.getElementById("watering-gif");
            wateringGif.style.display = "block";
            
            // C·∫≠p nh·∫≠t c·∫•p ƒë·ªô c√¢y
            treeLevel = Math.min(treeLevel + 1, 7);
            
            // C·∫≠p nh·∫≠t h√¨nh ·∫£nh c√¢y sau 1.5 gi√¢y
            setTimeout(() => {
                const treeImg = document.getElementById("tree-img");
                treeImg.classList.add('tree-growth');
                setTimeout(() => {
                    treeImg.classList.remove('tree-growth');
                }, 1000);
                
                document.getElementById("tree-img").src = `images/tree_day${treeLevel}.png`;
                wateringGif.style.display = "none";
                
                // Th√¥ng b√°o cho ng∆∞·ªùi d√πng bi·∫øt c√¢y ƒë√£ tƒÉng c·∫•p
                document.getElementById("tree-status").textContent = "C√¢y ƒë√£ ph√°t tri·ªÉn!";
                document.getElementById("tree-status").style.color = "#4CAF50";
                
                // T·∫°o hi·ªáu ·ª©ng
                createSmallConfetti(treeImg);
                
                // L∆∞u d·ªØ li·ªáu
                saveData();
            }, 1500);
        }

        // H√†m t·∫°o hi·ªáu ·ª©ng confetti nh·ªè
        function createSmallConfetti(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '8px';
                confetti.style.height = '8px';
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.left = `${centerX}px`;
                confetti.style.top = `${centerY}px`;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.opacity = '1';
                confetti.style.zIndex = '9999';
                confetti.style.pointerEvents = 'none';
                document.body.appendChild(confetti);

                const angle = Math.random() * Math.PI * 2;
                const distance = 20 + Math.random() * 80;
                const duration = 0.5 + Math.random() * 1;

                confetti.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;

                setTimeout(() => {
                    confetti.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
                    confetti.style.opacity = '0';
                }, 10);

                setTimeout(() => {
                    document.body.removeChild(confetti);
                }, duration * 1000);
            }
        }

        // H√†m t·∫°o m√†u ng·∫´u nhi√™n
        function getRandomColor() {
            const colors = [
                '#ff0000', '#ffa500', '#ffff00', '#00ff00', '#00ffff', 
                '#0000ff', '#ff00ff', '#ff69b4', '#00ff7f', '#ff4500'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // H√†m t·∫°o hi·ªáu ·ª©ng ph√°o hoa
        function createFireworks() {
            const fireworksContainer = document.createElement('div');
            fireworksContainer.style.position = 'fixed';
            fireworksContainer.style.top = '0';
            fireworksContainer.style.left = '0';
            fireworksContainer.style.width = '100%';
            fireworksContainer.style.height = '100%';
            fireworksContainer.style.pointerEvents = 'none';
            fireworksContainer.style.zIndex = '999';
            document.body.appendChild(fireworksContainer);

            // T·∫°o √¢m thanh ph√°o hoa
            const audio = document.getElementById("audio-congrats");
            audio.src = "audio/firework.mp3";
            audio.play().catch(e => console.warn("Kh√¥ng th·ªÉ ph√°t √¢m thanh:", e));

            // TƒÉng s·ªë l∆∞·ª£ng ph√°o hoa v√† th·ªùi gian hi·ªÉn th·ªã
            const totalFireworks = 15; 
            const duration = 8000; 

            // T·∫°o ph√°o hoa v·ªõi t·∫ßn su·∫•t cao h∆°n
            for (let i = 0; i < totalFireworks; i++) {
                setTimeout(() => {
                    createSingleFirework(fireworksContainer);
                }, i * 400);
            }

            setTimeout(() => {
                document.body.removeChild(fireworksContainer);
            }, duration);
        }

        // H√†m t·∫°o m·ªôt ph√°o hoa
        function createSingleFirework(container) {
            // V·ªã tr√≠ xu·∫•t ph√°t
            const startX = Math.random() * window.innerWidth;
            const startY = window.innerHeight;

            // V·ªã tr√≠ n·ªï
            const explodeX = startX + (Math.random() * 200 - 100);
            const explodeY = 100 + Math.random() * (window.innerHeight / 2);

            // T·∫°o ph√°o hoa
            const firework = document.createElement('div');
            firework.style.position = 'absolute';
            firework.style.width = '8px';
            firework.style.height = '8px';
            firework.style.borderRadius = '50%';
            firework.style.backgroundColor = getRandomColor();
            firework.style.boxShadow = `0 0 6px ${getRandomColor()}`;
            firework.style.left = `${startX}px`;
            firework.style.top = `${startY}px`;
            firework.style.transition = `transform 1.5s ease-out, opacity 1.5s ease-out`;
            container.appendChild(firework);

            // Bay l√™n v√† n·ªï
            setTimeout(() => {
                firework.style.transform = `translate(${explodeX - startX}px, ${explodeY - startY}px)`;

                // N·ªï th√†nh nhi·ªÅu tia nh·ªè
                setTimeout(() => {
                    firework.remove();
                    createExplosion(container, explodeX, explodeY);
                }, 1500);
            }, 10);
        }

        // T·∫°o hi·ªáu ·ª©ng n·ªï
        function createExplosion(container, x, y) {
            const particles = 30 + Math.floor(Math.random() * 20);
            const explosionColor = getRandomColor();

            for (let i = 0; i < particles; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.width = '4px';
                particle.style.height = '4px';
                particle.style.borderRadius = '50%';
                particle.style.backgroundColor = explosionColor;
                particle.style.boxShadow = `0 0 4px ${explosionColor}`;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.opacity = '1';
                particle.style.transition = `transform 1s ease-out, opacity 1s ease-out`;
                container.appendChild(particle);

                const angle = Math.random() * Math.PI * 2;
                const distance = 20 + Math.random() * 100;
                
                setTimeout(() => {
                    particle.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
                    particle.style.opacity = '0';
                    
                    setTimeout(() => {
                        if(container.contains(particle)) {
                            container.removeChild(particle);
                        }
                    }, 1000);
                }, 10);
            }
        }

        // H√†m ki·ªÉm tra v√† reset c√¢y h√†ng tu·∫ßn
        function checkAndResetTree() {
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0 = Ch·ªß nh·∫≠t, 1 = Th·ª© 2, ...

            // Ki·ªÉm tra xem c√≥ ph·∫£i l√† th·ª© 2 kh√¥ng
            if (dayOfWeek === 1) {
                // L·∫•y ng√†y cu·ªëi c√πng reset c√¢y t·ª´ localStorage
                const lastResetDate = localStorage.getItem('lastTreeReset');
                const today = new Date().toDateString();

                // N·∫øu ch∆∞a reset h√¥m nay
                if (lastResetDate !== today) {
                    // Reset c√¢y v·ªÅ c·∫•p ƒë·ªô 1
                    treeLevel = 1;
                    document.getElementById("tree-img").src = "images/tree_day1.png";
                    document.getElementById("tree-status").textContent = "Tu·∫ßn m·ªõi b·∫Øt ƒë·∫ßu! H√£y chƒÉm c√¢y m·ªõi!";
                    
                    // L∆∞u ng√†y ƒë√£ reset
                    localStorage.setItem('lastTreeReset', today);
                    
                    // L∆∞u d·ªØ li·ªáu
                    saveData();
                }
            }
        }

        // H√†m th√™m credits t∆∞·ªõi n∆∞·ªõc
        function addWaterCredits(units) {
            waterCredits += units;
            document.getElementById("water-units").textContent = waterCredits;
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            const waterNotification = document.createElement("div");
            waterNotification.style.position = "fixed";
            waterNotification.style.bottom = "10px";
            waterNotification.style.left = "50%";
            waterNotification.style.transform = "translateX(-50%)";
            waterNotification.style.backgroundColor = "#2196F3";
            waterNotification.style.color = "white";
            waterNotification.style.padding = "10px 20px";
            waterNotification.style.borderRadius = "5px";
            waterNotification.style.zIndex = "9999";
            waterNotification.innerHTML = `<i class="fas fa-plus"></i> ƒê√£ th√™m ${units} l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc!`;
            
            document.body.appendChild(waterNotification);
            
            setTimeout(() => {
                waterNotification.style.opacity = "0";
                waterNotification.style.transition = "opacity 0.5s";
                setTimeout(() => {
                    document.body.removeChild(waterNotification);
                }, 500);
            }, 2000);
            
            // L∆∞u d·ªØ li·ªáu
            saveData();
            
            console.log("ƒê√£ th√™m", units, "l∆∞·ª£t t∆∞·ªõi, hi·ªán c√≥:", waterCredits);
        }
        
        // H√†m l∆∞u d·ªØ li·ªáu
        function saveData() {
            // L∆∞u d·ªØ li·ªáu c√¢y
            localStorage.setItem('treeData', JSON.stringify({
                waterCredits: waterCredits,
                treeLevel: treeLevel
            }));
        }

        // H√†m t·∫£i d·ªØ li·ªáu
        function loadData() {
            // T·∫£i d·ªØ li·ªáu c√¢y
            const treeData = localStorage.getItem('treeData');
            if (treeData) {
                const parsedTreeData = JSON.parse(treeData);
                waterCredits = parsedTreeData.waterCredits || 0;
                treeLevel = parsedTreeData.treeLevel || 1;
                
                // C·∫≠p nh·∫≠t UI
                if (document.getElementById("water-units")) {
                    document.getElementById("water-units").textContent = waterCredits;
                }
                updateTreeImage();
                
                console.log("ƒê√£ t·∫£i d·ªØ li·ªáu: l∆∞·ª£t t∆∞·ªõi =", waterCredits, "c·∫•p ƒë·ªô c√¢y =", treeLevel);
            }
            
            // L·∫•y ng√†y trong tu·∫ßn hi·ªán t·∫°i
            currentWeekDay = new Date().getDay(); // 0: Ch·ªß Nh·∫≠t, 1: Th·ª© 2...
            
            // Ki·ªÉm tra v√† reset c√¢y n·∫øu c·∫ßn
            checkAndResetTree();
        }

        // H√†m ƒë√°nh gi√° nhi·ªám v·ª•
        function rateTask(childName, taskId, rating) {
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            
            // Ki·ªÉm tra m·∫≠t kh·∫©u n·∫øu kh√¥ng ph·∫£i l√† m√¥i tr∆∞·ªùng ph√°t tri·ªÉn
            if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
                const pin = prompt("Nh·∫≠p m√£ PIN ƒë·ªÉ x√°c nh·∫≠n (****)");
                if (pin !== "2022") {
                    alert("M√£ PIN kh√¥ng ƒë√∫ng!");
                    return;
                }
            }
            
            // L∆∞u ƒë√°nh gi√°
            let childData = JSON.parse(localStorage.getItem(`${childName}Data`) || '{}');
            if (!childData.tasks) childData.tasks = {};
            if (!childData.tasks[today]) childData.tasks[today] = {};
            
            childData.tasks[today][taskId] = rating;
            
            // T√≠nh ƒëi·ªÉm
            if (rating === 'good') {
                // Th√™m l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc khi ho√†n th√†nh t·ªët
                addWaterCredits(1);
                
                // Ph√°t √¢m thanh khen ng·ª£i
                const task = tasks[childName].find(t => t.id === taskId);
                if (task && task.audio) {
                    playAudio(task.audio);
                }
                
                // Hi·ªÉn th·ªã popup ch√∫c m·ª´ng
                showCongratulation(task.name, childName);
            }
            
            // L∆∞u d·ªØ li·ªáu
            localStorage.setItem(`${childName}Data`, JSON.stringify(childData));
            
            // C·∫≠p nh·∫≠t giao di·ªán
            updateTaskDisplay();
            
            // Ki·ªÉm tra v√† c·∫≠p nh·∫≠t huy hi·ªáu
            checkBadges(childName);
        }

        // H√†m hi·ªÉn th·ªã ch√∫c m·ª´ng
        function showCongratulation(taskName, childName) {
            const popup = document.getElementById("popup-congrats");
            const popupText = document.getElementById("popup-text");
            
            // Hi·ªÉn th·ªã th√¥ng b√°o ph√π h·ª£p v·ªõi t·ª´ng b√©
            const childDisplayName = childName === 'thaoVy' ? 'Th·∫£o Vy' : 'Tr√≠ D≈©ng';
            popupText.innerText = `Ch√∫c m·ª´ng b√© ${childDisplayName} ho√†n th√†nh t·ªët nhi·ªám v·ª•: ${taskName}`;
            popup.style.display = "block";
            
            // T·ª± ƒë·ªông ·∫©n sau 3 gi√¢y
            setTimeout(() => {
                popup.style.display = "none";
            }, 3000);
        }

        // H√†m ki·ªÉm tra v√† c·∫•p huy hi·ªáu
        function checkBadges(childName) {
            // L·∫•y d·ªØ li·ªáu nhi·ªám v·ª•
            const childData = JSON.parse(localStorage.getItem(`${childName}Data`) || '{}');
            if (!childData.tasks) return;
            
            // L·∫•y danh s√°ch huy hi·ªáu ƒë√£ c√≥
            let earnedBadges = JSON.parse(localStorage.getItem('earnedBadges') || '{}');
            
            // Ki·ªÉm tra huy hi·ªáu ng·ªß ngoan 7 ng√†y
            const sleepTask = childName === 'tridung' ? 'td6' : 'tv6';
            let sleepStreak = 0;
            
            // L·∫•y 7 ng√†y g·∫ßn nh·∫•t
            for (let i = 0; i < 7; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateKey = date.toISOString().split('T')[0];
                
                if (childData.tasks[dateKey] && 
                    childData.tasks[dateKey][sleepTask] === 'good') {
                    sleepStreak++;
                } else {
                    break;
                }
            }
            
            // C·∫•p huy hi·ªáu n·∫øu ƒë·ªß ƒëi·ªÅu ki·ªán
            const badgeKey = `sleep7_${childName}`;
            if (sleepStreak >= 7 && !earnedBadges[badgeKey]) {
                earnedBadges[badgeKey] = {
                    date: new Date().toISOString(),
                    forChild: childName
                };
                
                // Hi·ªáu ·ª©ng th√¥ng b√°o huy hi·ªáu m·ªõi
                showBadgeAward('sleep7', childName);
            }
            
            // L∆∞u danh s√°ch huy hi·ªáu
            localStorage.setItem('earnedBadges', JSON.stringify(earnedBadges));
        }

        // Hi·ªáu ·ª©ng hi·ªÉn th·ªã huy hi·ªáu m·ªõi
        function showBadgeAward(badgeId, childName) {
            const badge = badges[badgeId];
            if (!badge) return;
            
            // T·∫°o ph·∫ßn t·ª≠ th√¥ng b√°o
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.top = '50%';
            notification.style.left = '50%';
            notification.style.transform = 'translate(-50%, -50%)';
            notification.style.background = 'linear-gradient(45deg, #FF9800, #FF5722)';
            notification.style.color = 'white';
            notification.style.padding = '20px';
            notification.style.borderRadius = '15px';
            notification.style.boxShadow = '0 5px 30px rgba(0,0,0,0.3)';
            notification.style.textAlign = 'center';
            notification.style.zIndex = '10000';
            notification.style.fontSize = '24px';
            notification.style.animation = 'badgeWiggle 1s infinite';
            
            // Th√™m style animation
            if (!document.getElementById('badgeAnimStyle')) {
                const style = document.createElement('style');
                style.id = 'badgeAnimStyle';
                style.textContent = `
                    @keyframes badgeWiggle {
                        0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
                        25% { transform: translate(-50%, -50%) rotate(-5deg); }
                        75% { transform: translate(-50%, -50%) rotate(5deg); }
                    }
                    
                    @keyframes badgeFade {
                        from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                        to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // N·ªôi dung th√¥ng b√°o
            const childDisplayName = childName === 'thaoVy' ? 'Th·∫£o Vy' : 'Tr√≠ D≈©ng';
            notification.innerHTML = `
                <div style="font-size: 72px; margin-bottom: 10px;">${badge.icon}${badge.icon}${badge.icon}</div>
                <div style="font-weight: bold; margin-bottom: 10px;">üéâ CH√öC M·ª™NG B√â ${childDisplayName.toUpperCase()}! üéâ</div>
                <div>B√© ƒë√£ ƒë·∫°t ƒë∆∞·ª£c huy hi·ªáu m·ªõi:</div>
                <div style="font-weight: bold; font-size: 28px; margin: 10px 0;">${badge.name}</div>
                <div>${badge.condition}</div>
                <button style="margin-top: 20px; padding: 10px 20px; background: white; color: #FF5722; border: none; border-radius: 30px; font-weight: bold; cursor: pointer;">C·∫£m ∆°n</button>
            `;
            
            // Th√™m v√†o body
            document.body.appendChild(notification);
            
            // X·ª≠ l√Ω s·ª± ki·ªán n√∫t ƒë√≥ng
            notification.querySelector('button').addEventListener('click', () => {
                notification.style.animation = 'badgeFade 0.5s forwards';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            });
            
            // T·ª± ƒë·ªông ƒë√≥ng sau 10 gi√¢y
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    notification.style.animation = 'badgeFade 0.5s forwards';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 500);
                }
            }, 10000);
            
            // Ph√°t √¢m thanh vui nh·ªôn
            const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/218/218-preview.mp3');
            audio.play().catch(e => console.warn("Kh√¥ng th·ªÉ ph√°t √¢m thanh:", e));
        }

        // H√†m hi·ªÉn th·ªã nhi·ªám v·ª•
        function updateTaskDisplay() {
            const taskLists = document.querySelectorAll('.task-list');
            taskLists.forEach(list => {
                list.innerHTML = '';
            });
            
            // L·∫•y ng√†y hi·ªán t·∫°i
            const today = new Date().toISOString().split('T')[0];
            
            // Hi·ªÉn th·ªã nhi·ªám v·ª• cho t·ª´ng b√©
            for (const childName in tasks) {
                const childData = JSON.parse(localStorage.getItem(`${childName}Data`) || '{}');
                const taskList = document.querySelector(`#${childName} .task-list`);
                
                if (!taskList) continue;
                
                tasks[childName].forEach(task => {
                    const rating = childData.tasks && childData.tasks[today] ? 
                                   childData.tasks[today][task.id] : null;
                    
                    const taskElement = document.createElement('div');
                    taskElement.className = `task ${rating ? 'completed-' + rating : ''}`;
                    taskElement.innerHTML = `
                        <div class="task-header">
                            <div class="task-time">${task.time}</div>
                            <div class="task-name">${task.name}</div>
                        </div>
                        <div class="rating-buttons">
                            <button class="rating-btn good-btn ${rating === 'good' ? 'active' : ''}" 
                                    onclick="rateTask('${childName}', '${task.id}', 'good')">
                                <i class="fas fa-smile"></i> T·ªët
                            </button>
                            <button class="rating-btn neutral-btn ${rating === 'neutral' ? 'active' : ''}" 
                                    onclick="rateTask('${childName}', '${task.id}', 'neutral')">
                                <i class="fas fa-meh"></i> Ch·∫•p nh·∫≠n ƒë∆∞·ª£c
                            </button>
                            <button class="rating-btn bad-btn ${rating === 'bad' ? 'active' : ''}" 
                                    onclick="rateTask('${childName}', '${task.id}', 'bad')">
                                <i class="fas fa-frown"></i> Ch∆∞a t·ªët
                            </button>
                        </div>
                    `;
                    
                    taskList.appendChild(taskElement);
                });
            }
        }

        // H√†m chuy·ªÉn ƒë·ªïi tab
        function switchTab(childName) {
            currentChild = childName;
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelector(`.tab[data-child="${childName}"]`).classList.add('active');
            
            // Hi·ªÉn th·ªã n·ªôi dung t∆∞∆°ng ·ª©ng
            document.querySelectorAll('.child-content').forEach(content => {
                content.style.display = 'none';
            });
            
            document.getElementById(childName).style.display = 'block';
            
            // ·∫®n/hi·ªán profile t∆∞∆°ng ·ª©ng
            document.getElementById('tridung-profile').style.display = childName === 'tridung' ? 'flex' : 'none';
            document.getElementById('thaoVy-profile').style.display = childName === 'thaoVy' ? 'flex' : 'none';
            
            // C·∫≠p nh·∫≠t t√™n c√¢y
            const treeName = document.getElementById('tree-name');
            if (treeName) {
                treeName.textContent = `C√¢y c·ªßa b√© ${childName === 'tridung' ? 'Tr√≠ D≈©ng' : 'Th·∫£o Vy'}`;
            }
        }

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        document.addEventListener('DOMContentLoaded', function() {
            // T·∫£i d·ªØ li·ªáu
            loadData();
            
            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã nhi·ªám v·ª•
            updateTaskDisplay();
            
            // C·∫≠p nh·∫≠t th·ªùi gian hi·ªán t·∫°i
            updateCurrentTime();
            
            // C·∫≠p nh·∫≠t th·ªùi gian m·ªói ph√∫t
            setInterval(updateCurrentTime, 60000);
            
            // Th√™m s·ª± ki·ªán cho c√°c tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const childName = this.getAttribute('data-child');
                    switchTab(childName);
                });
            });
        });

        // H√†m c·∫≠p nh·∫≠t th·ªùi gian hi·ªán t·∫°i
        function updateCurrentTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                day: 'numeric', 
                month: 'numeric', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const timeString = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString('vi-VN', options);
            
            const timeElements = document.querySelectorAll('.current-time');
            timeElements.forEach(el => {
                el.textContent = `${timeString}, ${dateString.charAt(0).toUpperCase() + dateString.slice(1)}`;
            });
            
            // Ki·ªÉm tra th√¥ng b√°o nhi·ªám v·ª•
            checkTaskNotifications();
        }

        // Ki·ªÉm tra th√¥ng b√°o d·ª±a tr√™n th·ªùi gian
        function checkTaskNotifications() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const currentTime = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            
            // Ki·ªÉm tra c·∫£ hai b√©
            for (const childName in tasks) {
                const childTasks = tasks[childName];
                
                // T√¨m nhi·ªám v·ª• g·∫ßn v·ªõi th·ªùi gian hi·ªán t·∫°i nh·∫•t
                childTasks.forEach(task => {
                    if (task.time === `${hours}:${minutes < 10 ? '0' + minutes : minutes}`) {
                        showNotification(`ƒê·∫øn gi·ªù ${task.name} r·ªìi!`);
                        
                        // Ph√°t √¢m thanh n·∫øu c√≥
                        if (task.audio) {
                            playAudio(task.audio);
                        }
                    }
                });
            }
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message) {
            // Ki·ªÉm tra xem ƒë√£ c√≥ th√¥ng b√°o hay ch∆∞a
            let notification = document.getElementById("notification");
            
            // N·∫øu ch∆∞a c√≥, t·∫°o m·ªõi
            if (!notification) {
                notification = document.createElement("div");
                notification.id = "notification";
                notification.className = "notification";
                document.body.appendChild(notification);
            }
            
            notification.innerHTML = `<i class="fas fa-bell"></i> ${message}`;
            notification.style.display = 'block';
            
            // T·ª± ƒë·ªông ·∫©n sau 5 gi√¢y
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // H√†m reset c√¢y (admin)
        function resetTree() {
            const pin = prompt("Nh·∫≠p m√£ PIN ƒë·ªÉ x√°c nh·∫≠n reset c√¢y (****)");
            if (pin !== "2022") {
                alert("M√£ PIN kh√¥ng ƒë√∫ng!");
                return;
            }

            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën reset c√¢y v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu?")) {
                treeLevel = 1;
                waterCredits = 0;
                document.getElementById("tree-img").src = "images/tree_day1.png";
                document.getElementById("tree-status").textContent = "C√¢y ƒë√£ ƒë∆∞·ª£c reset v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu!";
                if (document.getElementById("water-units")) {
                    document.getElementById("water-units").textContent = "0";
                }
                saveData();
                alert("ƒê√£ reset c√¢y th√†nh c√¥ng!");
            }
        }
    </script>

    <!-- Thay th·∫ø ph·∫ßn div c√¢y c≈© b·∫±ng container m·ªõi -->
    <div class="tree-container">
        <img id="tree-img" src="images/tree_day1.png" class="tree-image" alt="C√¢y ph√°t tri·ªÉn">
        <div class="tree-name" id="tree-name">
            C√¢y c·ªßa b√© Tr√≠ D≈©ng
        </div>
        <div id="tree-status" style="font-weight:bold; color:#FF9800; margin:5px 0;">
            C√¢y c·∫ßn n∆∞·ªõc ƒë·ªÉ ph√°t tri·ªÉn!
        </div>
        <div style="margin-top:5px;">
            <span id="water-count" style="font-weight:bold; color:#2196F3;"></span>
        </div>
        <button class="water-button" onclick="waterTree()" title="T∆∞·ªõi n∆∞·ªõc cho c√¢y">
            üíß
        </button>
    </div>

    <!-- Add this section after the tree container -->
    <div class="weekly-challenge-container">
        <h3>Th·ª≠ Th√°ch Tu·∫ßn N√†y</h3>
        <p id="current-challenge">ƒêang t·∫£i th·ª≠ th√°ch...</p>
        
        <div class="progress-bar-container">
            <div class="progress-bar">
                <div id="challenge-progress-fill"></div>
            </div>
            <span id="challenge-progress-text">0/3</span>
        </div>
        
        <div class="challenge-reward-container">
            <h4>Ph·∫ßn th∆∞·ªüng:</h4>
            <p id="challenge-reward">2 l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc ƒë·∫∑c bi·ªát</p>
        </div>
    </div>

    <!-- Admin panel -->
    <div id="admin-panel" style="display: none;">
        <div class="admin-header">
            <h3>Qu·∫£n l√Ω</h3>
            <button id="admin-close" class="btn-close">√ó</button>
        </div>
        <div class="admin-controls">
            <button id="btn-add-water" class="admin-btn">Th√™m 1 l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc</button>
            <button id="btn-reset-tree" class="admin-btn">ƒê·∫∑t l·∫°i c√¢y</button>
            <button id="btn-trigger-fireworks" class="admin-btn">Hi·ªáu ·ª©ng ph√°o hoa</button>
        </div>
    </div>

    <div class="weekly-challenge-container">
        <h3><i class="fas fa-trophy"></i> Th·ª≠ th√°ch tu·∫ßn n√†y</h3>
        <div class="challenge-description" id="current-challenge">
            Ho√†n th√†nh <strong>3 nhi·ªám v·ª•</strong> ƒêi ng·ªß ƒë√∫ng gi·ªù li√™n ti·∫øp!
        </div>
        <div class="challenge-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="challenge-progress-fill" style="width: 0%"></div>
            </div>
            <span id="challenge-progress-text">0/3</span>
        </div>
        <div class="challenge-reward">
            <span id="reward-icon">üéÅ</span> Ph·∫ßn th∆∞·ªüng: <span id="challenge-reward">2 l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc ƒë·∫∑c bi·ªát!</span>
        </div>
    </div>

    <!-- Admin Controls (hidden by default) -->
    <div class="admin-controls" id="admin-panel" style="display: none;">
        <h3><i class="fas fa-cog"></i> Qu·∫£n l√Ω</h3>
        <button id="btn-add-water" class="admin-btn">
            <i class="fas fa-plus"></i> Th√™m 1 l∆∞·ª£t t∆∞·ªõi
        </button>
        <button id="btn-reset-tree" class="admin-btn">
            <i class="fas fa-sync"></i> ƒê·∫∑t l·∫°i c√¢y
        </button>
        <button id="btn-trigger-fireworks" class="admin-btn">
            <i class="fas fa-fire"></i> Hi·ªáu ·ª©ng ph√°o hoa
        </button>
    </div>

    <div id="popup-congrats" style="display:none; position:fixed; top:30%; left:50%; transform:translate(-50%, -50%); z-index:9999; text-align:center;">
        <img alt="M·∫π Qu·ª≥nh" src="images/me_quynh.jpg" style="width:250px; border-radius:10px; box-shadow: 0 0 10px #888;"/>
        <div id="popup-text" style="background:white; padding:10px; font-weight:bold; font-size:18px; margin-top:-5px;">B√© l√†m t·ªët l·∫Øm!</div>
    </div>
    <audio id="audio-congrats" preload="auto" src=""></audio>
    <img id="watering-gif" src="images/water.gif" style="display:none; position:absolute; width:120px; top:350px; left:1190px; z-index:10;"/>

    <div class="level-display">
        Level: <span id="levelNumber">1</span>
        <span id="levelStars" class="level-star"></span>
    </div>

    <!-- Weekly Challenge Section -->
    <div class="weekly-challenge">
        <h3><i class="fas fa-trophy"></i> Th·ª≠ th√°ch tu·∫ßn n√†y</h3>
        <div id="challenge-description">Ho√†n th√†nh t·ªët c√°c nhi·ªám v·ª• 5 ng√†y li√™n ti·∫øp</div>
        <div class="challenge-progress">Ti·∫øn ƒë·ªô: <span id="challenge-progress-text">0/5</span></div>
        <div>Ph·∫ßn th∆∞·ªüng: <span class="challenge-reward">üéÅ</span></div>
    </div>

    <!-- Admin Controls (hidden by default) -->
    <div style="margin-top: 20px; text-align: center; padding: 10px; background-color: #f5f5f5; border-radius: 8px; display: none;" id="admin-controls">
        <h4>Qu·∫£n l√Ω h·ªá th·ªëng</h4>
        <button onclick="resetTree()" class="admin-button">Reset c√¢y</button>
        <button onclick="addWaterCredits(5)" class="admin-button">Th√™m 5 l∆∞·ª£t t∆∞·ªõi</button>
        <button onclick="localStorage.clear(); location.reload();" class="admin-button">X√≥a d·ªØ li·ªáu</button>
    </div>

    <!-- Admin Access Button -->
    <div style="text-align: center; margin-top: 20px;">
        <button onclick="toggleAdminControls()" style="background: none; border: none; color: #999; font-size: 14px;">‚öôÔ∏è</button>
    </div>

    <!-- Admin toggle function -->
    <script>
        function toggleAdminControls() {
            const pin = prompt("Nh·∫≠p m√£ PIN ƒë·ªÉ truy c·∫≠p t√≠nh nƒÉng qu·∫£n tr·ªã (****)");
            if (pin === "2022") {
                const adminControls = document.getElementById("admin-controls");
                adminControls.style.display = adminControls.style.display === "none" ? "block" : "none";
            } else {
                alert("M√£ PIN kh√¥ng ƒë√∫ng!");
            }
        }
    </script>

    <!-- Add this just before the closing body tag -->
    <!-- Weekly Challenge Section -->
    <div class="weekly-challenge-container">
        <h3>Th·ª≠ th√°ch tu·∫ßn n√†y</h3>
        <p id="current-challenge-text">Ho√†n th√†nh 10 nhi·ªám v·ª• trong tu·∫ßn n√†y!</p>
        
        <div class="progress-bar-container">
            <div class="progress-bar">
                <div id="challenge-progress-fill"></div>
            </div>
            <div id="challenge-progress-text">0/10 nhi·ªám v·ª•</div>
        </div>
        
        <div class="challenge-reward-container">
            <h4>Ph·∫ßn th∆∞·ªüng:</h4>
            <p id="challenge-reward-text">M·ªôt chuy·∫øn ƒëi ch∆°i c√¥ng vi√™n cu·ªëi tu·∫ßn!</p>
        </div>
    </div>

    <!-- Admin Panel Toggle Button -->
    <div id="admin-toggle" title="C√†i ƒë·∫∑t qu·∫£n tr·ªã">‚öôÔ∏è</div>

    <!-- Admin Panel -->
    <div id="admin-panel" style="display: none;">
        <div class="admin-header">
            <h4>Qu·∫£n l√Ω h·ªá th·ªëng</h4>
            <button class="btn-close" id="close-admin">√ó</button>
        </div>
        <div class="admin-controls">
            <button class="admin-btn" id="reset-day">Reset ng√†y m·ªõi</button>
            <button class="admin-btn" id="reset-week">Reset tu·∫ßn m·ªõi</button>
            <button class="admin-btn" id="backup-data">Sao l∆∞u d·ªØ li·ªáu</button>
            <button class="admin-btn" id="restore-data">Kh√¥i ph·ª•c d·ªØ li·ªáu</button>
        </div>
    </div>
</body>
</html>